<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Best Panel Shop</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oxanium:wght@400;700&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Oxanium', sans-serif; }
        body { background: #f1f5f9; color: #333; padding-bottom: 80px; }

        /* Profile Header */
        .profile-header { background: #1e293b; color: white; padding: 40px 20px; text-align: center; border-radius: 0 0 30px 30px; }
        .user-icon { width: 80px; height: 80px; background: #f43f5e; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; margin: 0 auto 15px; border: 4px solid rgba(255,255,255,0.2); }
        .user-email { font-size: 16px; font-weight: bold; margin-bottom: 5px; }

        /* Stats Card */
        .stats-container { margin: -30px 20px 20px; background: white; border-radius: 15px; padding: 20px; display: flex; justify-content: space-around; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .stat-box { text-align: center; }
        .stat-value { display: block; font-size: 18px; font-weight: 800; color: #f43f5e; }
        .stat-label { font-size: 12px; color: #64748b; font-weight: bold; }

        /* Menu List */
        .menu-list { margin: 0 20px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .menu-item { display: flex; align-items: center; padding: 15px 20px; text-decoration: none; color: #1e293b; border-bottom: 1px solid #f1f5f9; font-weight: 600; font-size: 14px; transition: 0.3s; }
        .menu-item:last-child { border-bottom: none; }
        .menu-item:active { background: #f8fafc; }
        .menu-icon { margin-right: 15px; font-size: 18px; }

        .logout-btn { margin: 25px 20px; background: #fee2e2; color: #ef4444; text-align: center; padding: 15px; border-radius: 12px; font-weight: 800; cursor: pointer; border: none; width: calc(100% - 40px); }

        /* Bottom Menu */
        .bottom-bar { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 5px; border-top: 1px solid #e2e8f0; }
        .nav-link { text-align: center; font-size: 10px; color: #64748b; text-decoration: none; font-weight: 600; }
    </style>
</head>
<body>

    <div class="profile-header">
        <div class="user-icon">üë§</div>
        <div class="user-email" id="email-display">Loading...</div>
        <div style="font-size: 12px; opacity: 0.7;">Verified Member</div>
    </div>

    <div class="stats-container">
        <div class="stat-box">
            <span class="stat-value">‡ß≥ <span id="balance-display">0</span></span>
            <span class="stat-label">Wallet Balance</span>
        </div>
        <div class="stat-box">
            <span class="stat-value">‡ß≥ <span id="spent-display">0</span></span>
            <span class="stat-label">Total Spent</span>
        </div>
    </div>

    <div class="menu-list">
        <a href="add-money.html" class="menu-item"><span class="menu-icon">üí≥</span> Add Funds</a>
        <a href="shop.html" class="menu-item"><span class="menu-icon">üõçÔ∏è</span> Shop Now</a>
        <a href="my-orders.html" class="menu-item"><span class="menu-icon">üì¶</span> My Orders</a>
        <a href="https://wa.me/YOUR_NUMBER" class="menu-item"><span class="menu-icon">üéß</span> Support Center</a>
    </div>

    <button class="logout-btn" onclick="logoutUser()">LOGOUT ACCOUNT</button>

    <div class="bottom-bar">
        <a href="index.html" class="nav-link">üè†<br>Home</a>
        <a href="add-money.html" class="nav-link">üí≥<br>Add Fund</a>
        <a href="#" class="nav-link" onclick="alert('Coming Soon')">üéÅ<br>My Codes</a>
        <a href="dashboard.html" class="nav-link" style="color: #f43f5e;">üë§<br>Account</a>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBx8h5PYxI34ZTaHs9ScdA8puSBt6h8yYU",
            authDomain: "panelshop-71ed8.firebaseapp.com",
            projectId: "panelshop-71ed8",
            storageBucket: "panelshop-71ed8.firebasestorage.app",
            messagingSenderId: "741029675696",
            appId: "1:741029675696:web:86331dc6ab82551d86f175"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Check Auth State
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById("email-display").innerText = user.email;
                
                // Fetch User Data from Firestore
                db.collection("users").doc(user.uid).onSnapshot(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        document.getElementById("balance-display").innerText = data.balance || 0;
                        document.getElementById("spent-display").innerText = data.spent || 0;
                    }
                });
            } else {
                window.location.href = 'login.html';
            }
        });

        // Logout Function
        function logoutUser() {
            auth.signOut().then(() => {
                window.location.href = 'login.html';
            });
        }
    </script>
</body>
</html>
